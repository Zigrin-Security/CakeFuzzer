PATCH_DIR="cakefuzzer/instrumentation/patches"
OVERRIDES='
[
    {
        "glob": "${APP_DIR}/../**/*.php",
        "function_name": "header",
        "new_function_name": "__cakefuzzer_header"
    },
    {
        "glob": "${APP_DIR}/../**/*.php",
        "function_name": "array_merge",
        "new_function_name": "__cakefuzzer_array_merge"
    }
]
'
PATCHES='
[
    {
        "patch": "${PATCH_DIR}/CakePHP/4/vendor/cakephp/authentication/src/AuthenticationService.php.patch",
        "original": "${APP_DIR}/../vendor/cakephp/authentication/src/AuthenticationService.php"
    },
    {
        "patch": "${PATCH_DIR}/CakePHP/4/vendor/laminas/laminas-diactoros/src/functions/normalize_server.php.patch",
        "original": "${APP_DIR}/../vendor/laminas/laminas-diactoros/src/functions/normalize_server.php"
    },
    {
        "patch": "${PATCH_DIR}/CakePHP/4/vendor/laminas/laminas-diactoros/src/functions/marshal_headers_from_sapi.php.patch",
        "original": "${APP_DIR}/../vendor/laminas/laminas-diactoros/src/functions/marshal_headers_from_sapi.php"
    },
    {
        "patch": "${PATCH_DIR}/CakePHP/4/vendor/laminas/laminas-diactoros/src/functions/marshal_uri_from_sapi.php.patch",
        "original": "${APP_DIR}/../vendor/laminas/laminas-diactoros/src/functions/marshal_uri_from_sapi.php"
    }
]
'
COPIES='
[
    {
        "src": "${PATCH_DIR}/CakePHP/4/vendor/cakephp/authentication/src/Identifier/FakeIdentifier.php",
        "dst": "${APP_DIR}/../vendor/cakephp/authentication/src/Identifier/FakeIdentifier.php"
    }
]
'